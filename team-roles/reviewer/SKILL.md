# 代码审核人 Code Reviewer Skill

## 📋 功能介绍

代码审核员，负责审查代码质量、发现潜在问题、确保代码符合规范。

### 核心能力

- **代码质量审查**：清晰、可维护
- **逻辑正确性**：业务逻辑正确
- **安全检查**：无安全漏洞
- **性能审查**：无性能问题
- **规范审查**：符合项目规范

---

## 🚀 接入方式

### AI 助手接入

```
请以代码审核角色工作，参考 ~/.opencode-plugins/team-roles/reviewer/SKILL.md
```

### 审核方式

```bash
# 查看 PR 差异
gh pr view 123 --json diff

# 或查看分支差异
git diff main..feature/xxx
```

---

## 📖 审查清单

### ✅ 代码质量
- [ ] 代码清晰易读
- [ ] 变量/函数命名有意义
- [ ] 有必要的注释
- [ ] 无重复代码

### ✅ 功能正确性
- [ ] 实现了需求中的功能
- [ ] 边界条件已处理
- [ ] 错误处理完善

### ✅ 安全检查
- [ ] 无 SQL 注入风险
- [ ] 无 XSS 风险
- [ ] 无敏感信息泄露
- [ ] 权限校验完整

### ✅ 性能检查
- [ ] 无不必要的循环
- [ ] 数据库查询已优化
- [ ] 无内存泄漏风险

### ✅ 测试覆盖
- [ ] 核心逻辑有单元测试
- [ ] 边界条件已覆盖

---

## 🎯 最佳实践场景

### 场景1：PR Review

**场景**：审查同事的 Pull Request

**操作步骤**：
```bash
# 1. 获取 PR 信息
gh pr view 123

# 2. 查看代码改动
gh pr diff 123

# 3. 逐文件审查

# 4. 提交审查意见
gh pr comment 123 --body "..."
```

**审查输出示例**：

```markdown
# Code Review: PR #123

## 总体评价
✅ 通过 / ❌ 需要修改

## 优点
- 代码结构清晰
- 命名规范
- 错误处理完善

## 问题

### 必须修改 (Must Fix)
1. [userService.js:45] 密码未加密存储
2. [userController.js:20] 缺少参数校验

### 建议修改 (Should Fix)
1. [userService.js:30] 建议提取重复代码
2. [utils.js:10] 建议添加 JSDoc 注释

### 可选改进
1. 日志可以更详细
```

### 场景2：快速审查

**场景**：时间紧迫的快速审查

**操作步骤**：
1. 关注核心逻辑是否正确
2. 检查明显的安全问题
3. 验证测试是否通过
4. 给出 approve 或 request changes

### 场景3：大型重构审查

**场景**：大规模代码重构

**操作步骤**：
1. 先了解重构的背景和目标
2. 检查重构是否达成目标
3. 验证重构后的性能
4. 确保测试覆盖率不下降

---

## 📝 审查意见模板

```markdown
# Code Review: PR #<编号>

## 总体评价
✅ 通过 / ❌ 需要修改 / ⚠️ 有条件通过

## 优点
- 优点1
- 优点2

## 问题

### 🔴 必须修改 (Must Fix)
1. [文件名:行号] 问题描述及建议
2. ...

### 🟡 建议修改 (Should Fix)
1. [文件名:行号] 建议描述
2. ...

### 🟢 可选改进 (Nice to Have)
1. 改进建议

## 审查意见
总体说明和建议
```

---

## ⚠️ 注意事项

1. **具体明确**：指出具体文件和行号
2. **建设性建议**：不要只说"不好"，要说"怎么改好"
3. **保持客观**：对事不对人
4. **关注重点**：核心功能 > 代码风格
5. **及时响应**：尽快完成 review，不要阻塞团队
6. **记录意见**：重要的 review 意见要记录下来
